{% extends "base.html" %}

{% block title %}Kamatera — Liste des Serveurs{% endblock %}

{% block header %}
<a href="/" class="inline-flex items-center text-blue-600 hover:text-blue-800">
  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
  </svg>
  Mes Serveurs
</a>
{% endblock %}

{% block content %}
<!-- Loading indicator -->
<div id="loading" class="text-center py-12">
  <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
  <p class="mt-4 text-gray-600">Chargement des serveurs…</p>
</div>

<!-- Servers container -->
<div id="servers-container" class="hidden">
  <!-- Will be populated dynamically -->
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/render.js"></script>
<script src="/static/js/fetcher.js"></script>
<script>
  /**
   * View server details
   */
  function viewDetails(serverId) {
    globalThis.location.href = `/server/${serverId}`;
  }

  /**
   * Remove loading indicator
   */
  function removeLoading() {
    document.getElementById('loading')?.classList.add('hidden');
    document.getElementById('servers-container')?.classList.remove('hidden');
  }

  // Load servers on page load
  globalThis.addEventListener('DOMContentLoaded', fetchServers);
</script>
{% endblock %}